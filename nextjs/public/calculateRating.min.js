!async function(){const t=["ultima","master","expert"];let a=[],n=!1,o=!1;const i="https://chuni-log.io.kookiym.com";function e(){n=!0;var e=$(".sleep_penguin img").clone().appendTo("body");e.css({position:"absolute",top:"200px","z-index":"200"}),function e(t){t.animate({left:Math.random()*(window.innerWidth-60)+"px",top:Math.random()*(window.innerHeight-88)+"px"},1e3,function(){n?e(t):t.remove()})}(e)}async function r(i){var e=i.charAt(0).toUpperCase()+i.slice(1),t=new FormData,e=(t.append("genre",99),t.append("token",function(e){var n=e+"=",o=decodeURIComponent(document.cookie).split(";");for(let t=0;t<o.length;t++){let e=o[t];for(;" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(n))return e.substring(n.length,e.length)}return""}("_t")),"https://chunithm-net-eng.com/mobile/record/musicGenre/send"+e);return fetch(e,{method:"POST",body:t,credentials:"include"}).then(function(e){return e.text()}).then(function(e){var e=(new DOMParser).parseFromString(e,"text/html"),t=$(e).find(".musiclist_box");if(t.length<=0)throw"fail, please login and try again";for(let e=0;e<t.length;e++){var n,o=t[e].getElementsByClassName("play_musicdata_highscore")[0];o&&(n=t[e].getElementsByClassName("music_title")[0].innerText,o=$(o).find("span")[0].innerText.split(",").join(""),0<=parseInt(o))&&a.push({name:n,difficulty:i,score:parseInt(o)})}}).catch(e=>{n=!1,o||(o=!0,alert(e))})}userID?(e(),async function(){try{for(let e=0;e<t.length;e++)await r(t[e])}catch(e){n=!1,console.log("calculateRating",e),alw}if(a.length<=0)throw"no songs record, please retry";console.table(a),fetch(i+"/api/record/"+userID,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:a})}).then(e=>e.text()).then(e=>{window.location=i}).catch(e=>{alert(e)}).finally(()=>{n=!1})}()):alert("Invalid!")}();