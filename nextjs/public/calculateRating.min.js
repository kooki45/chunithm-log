!function(){let b=["ultima","master","expert"],c=[],d="https://chuni-log.com";async function e(a,d){let b="https://chunithm-net-eng.com/mobile/record/musicGenre/"+a;return fetch(b,{credentials:"include"}).then(function(a){return a.text()}).then(function(h){var i=new DOMParser().parseFromString(h,"text/html");let d=$(i).find(".musiclist_box");if(d.length<=0)throw"fail, please try again on this link "+b;for(let e=0;e<d.length;e++){let f=d[e].getElementsByClassName("play_musicdata_highscore")[0];if(f){let j=d[e].getElementsByClassName("music_title")[0].innerText,g=$(f).find("span")[0].innerText.split(",").join("");parseInt(g)>=0&&c.push({name:j,difficulty:a,score:parseInt(g)})}}}).catch(a=>{console.log("calculateRating",a),alert("fail")})}async function a(){for(let a=0;a<b.length;a++)await e(b[a]);if(c.length<=0)throw"no songs record, please retry";console.table(c),fetch(d+"/api/record/"+userID,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:c})}).then(a=>a.text()).then(a=>{window.open(d)}).catch(a=>alert(a))}userID?a():alert("Invalid!")}()