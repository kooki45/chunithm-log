!async function(){let e=["ultima","master","expert"],t=[],n=!1,i="https://chuni-log.com";async function a(e,i){let a="https://chunithm-net-eng.com/mobile/record/musicGenre/"+e;return fetch(a,{credentials:"include"}).then(function(e){return e.text()}).then(function(n){var i=new DOMParser().parseFromString(n,"text/html");let l=$(i).find(".musiclist_box");if(l.length<=0)throw"fail, please try again on this link "+a;for(let o=0;o<l.length;o++){let s=l[o].getElementsByClassName("play_musicdata_highscore")[0];if(s){let r=l[o].getElementsByClassName("music_title")[0].innerText,c=$(s).find("span")[0].innerText.split(",").join("");parseInt(c)>=0&&t.push({name:r,difficulty:e,score:parseInt(c)})}}}).catch(t=>{n=!1,console.log("calculateRating",t),alert("fail, please try again on the musicGenre/"+e+" page")})}async function l(){for(let l=0;l<e.length;l++)await a(e[l]);if(t.length<=0)throw"no songs record, please retry";console.table(t),fetch(i+"/api/record/"+userID,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:t})}).then(e=>e.text()).then(e=>{window.open(i)}).catch(e=>{alert(e)}).finally(()=>{n=!1})}if(userID){let o;n=!0,(o=$(".sleep_penguin img").clone().appendTo("body")).css({position:"absolute",top:"200px","z-index":"200"}),function e(t){t.animate({left:Math.random()*(window.innerWidth-60)+"px",top:Math.random()*(window.innerHeight-88)+"px"},1e3,function(){n?e(t):t.remove()})}(o),await l()}else alert("Invalid!")}();