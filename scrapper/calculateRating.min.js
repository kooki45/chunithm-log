!function(){const t=["ultima","master","expert"];let e=[];function n(t){for(var e="",n=0,o=t.length;n<o;n++){var i=t[n].charCodeAt(0);i>=65280&&i<=65519&&(i=255&i+32),e+=String.fromCharCode(i)}return e.replace(/[\n\s'’]/g,"").replace(/[”“]/g,'"')}async function o(t,o){const i="https://chunithm-net-eng.com/mobile/record/musicGenre/"+t;return fetch(i,{credentials:"include"}).then((function(t){return t.text()})).then((function(a){var r=(new DOMParser).parseFromString(a,"text/html");const c=$(r).find(".musiclist_box");if(c.length<=0)throw"fail, please try again on this link "+i;for(let i=0;i<c.length;i++){let a=c[i].getElementsByClassName("play_musicdata_highscore")[0];if(a){let r=c[i].getElementsByClassName("music_title")[0].innerText,s=$(a).find("span")[0].innerText.split(",").join("");parseInt(s)>=0&&o[n(r)]&&o[n(r)][t]&&e.push({name:r,user_id:1,song_id:o[n(r)].id,rate:o[n(r)][t],difficulty:t,score:parseInt(s)})}}})).catch((t=>{console.log("calculateRating",t),alert("fail")}))}Number.prototype.round=function(t){return+(Math.round(this+"e+"+t)+"e-"+t)},async function(){fetch("https://chuni-log.com/api/songs",{method:"GET",headers:{"Content-Type":"application/json"}}).then((t=>t.json())).then((async n=>{const i=n;for(let e=0;e<t.length;e++)await o(t[e],i);console.table(e),fetch("https://chuni-log.com/api/record/update",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e,user_id:1})}).then((t=>t.text())).then((t=>{console.log("🚀 ~ file: calculateRating.js ~ line 120 ~ .then ~ r",t),window.open("https://chuni-log.com/home")}))})).catch((t=>{alert(t)}))}()}();